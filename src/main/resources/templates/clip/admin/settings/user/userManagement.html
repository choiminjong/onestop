<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">


<head th:replace="fragments/common :: head"></head>

<body>

<div id="wrapper">

    <!--메뉴-->
    <nav class="navbar-default navbar-static-side" role="navigation"
         th:replace="fragments/common :: menu('Settings','user')"></nav>

    <div id="page-wrapper" class="gray-bg">

        <!--프로필-->
        <div class="row border-bottom" th:replace="fragments/common :: profile"></nav></div>

        <!--Content-->
        <!--Content Body-->
        <div class="wrapper wrapper-content animated fadeInRight">
            <!--그룹 관리-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-title">사용자 관리 (총 : <span th:text="${accounts.totalElements}"> </span>)</div>
                        <div class="dmzt-container ibox-content" id="group-container">
                            <div class="row">
                                <div class="col-lg-12">
                                    <form class="form-inline d-flex justify-content-end" method="GET" th:action="@{/clip/userManagement}">
                                        <div class="form-group mx-sm-3 mb-2">
                                            <label for="searchText" class="sr-only">검색</label> &nbsp&nbsp&nbsp&nbsp
                                            <input type="text" class="form-control" id="searchText" name ="searchText" th:value="${param.searchText}">
                                        </div>
                                        <button type="submit" class="btn btn-light mb-2">검색</button>
                                    </form>
                                </div>
                            </div>

                            <hr/>
                            <div class="row">
                                <div class="col-lg-8">
                                    <table id="grid-groups" class="table table-striped">
                                        <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>사용자</th>
                                            <th>권한</th>
                                        </tr>
                                        </thead>
                                        <tbody id="grid-groups-list" class="tbody-grid-groups-list">
                                            <tr class="link_btn hover" th:each="account : ${accounts}">
                                                <td style="text-align: center;">
                                                    <a th:href="@{'/clip/accounts/' + ${account.id}}"><span th:text="${account.username}">회원</span></a>
                                                </td>
                                                <td style="text-align: center;" th:text="${account.email}"></td>
                                                <td style="text-align: center;">
                                                <span th:each="role,iter : ${account.userRoles}"><h5 th:text="${role.roleName}"></h5></span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div>
                                        <nav >
                                            <ul class="pagination">
                                                <li class="page-item" th:classappend="${1 == accounts.pageable.getPageNumber() +1} ? 'disabled'">
                                                    <a class="page-link" href="#" th:href="@{/clip/accounts(page=${accounts.pageable.getPageNumber() - 1},searchText=${param.searchText})}">Previous</a>
                                                </li>

                                                <li class="page-item " th:classappend="${i == accounts.pageable.getPageNumber() +1} ? 'disabled'"
                                                    th:each="i  : ${#numbers.sequence(startPage,endPage)} ">
                                                    <a class="page-link" href="#" th:text="${i}" th:href="@{/clip/accounts(page=${i - 1},searchText=${param.searchText})}">1</a></li>

                                                <li class="page-item" th:classappend="${accounts.totalPages == accounts.pageable.getPageNumber() +1} ? 'disabled'">
                                                    <a class="page-link" href="#" th:href="@{/clip/accounts(page=${accounts.pageable.getPageNumber() + 1},searchText=${param.searchText})}">Next</a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                                </br></br>

                                <div class="col-lg-4">
                                    <div class="form-horizontal">

                                        <div class="form-group">
                                            <label for="username" class="col-sm-2 control-label">아이디</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control input-large" name="username"
                                                       id="username" placeholder="username" required>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="password" class="col-sm-2 control-label">비밀번호</label>
                                            <div class="col-sm-10">
                                                <input type="password" class="form-control input-large" name="password"
                                                       id="password" placeholder="Password" data-minlength="6" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="email" class="col-sm-2 control-label">이메일</label>
                                            <div class="col-sm-10">
                                                <input type="email" class="form-control input-large" name="email"
                                                       id="email" placeholder="이메일" required>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-sm-offset-6 col-lg-7">
                                                <button type="button" class="btn btn-primary dmzt-create-button" th:onclick="|joinForm()|">등록</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <script type="text/javascript" th:src="@{/js/user/user.js}"></script>

    <!--footer-->
    <div class="footer" th:replace="fragments/common :: footer"></div>

</div>
<script>
    $(document).ready(function () {
        $("#input-group-users").select2();
    });
</script>
</div>
</body>
</html>